{% extends "base.html" %}


{% block content %}
    <style>
        .row {
            display: flex;
        {#align-items: top; /* To vertically center the content */#}
        }

        .dropdown {
            margin-left: 5px;
            margin-right: 5px;
        }

        .variable {
            color: red;
        }

        .space {
            margin-left: 5px;
            margin-right: 5px;
        }

        .sql-bold {
            font-weight: bold;
        }

        #content > *:not(#select-1) {
            display: none;
        }
    </style>

    <div class="row">
        <div class="col-md-8">
            {% include "parts/query-box.html" %}
        </div>
        <div class="col-md-4">
            <form id="retrieveForm" action="https://revival.exascale.info/api/drop.php">

                <div class="form-group">
                    <label>Dataset:</label>
                    <select id="form-dataset" class="form-control" name="drop" onclick="changeDataset()">
                        <option value="d1">d1</option>
                        <option value="d2">d2</option>
                    </select>
                    This dropdown also be in the Query directly or we write dataset in the query.
                </div>
{#                <div class="form-group clearfix">#}
{#                    <input id="applyBtn" type="submit" formaction="/api/drop.php" value="Apply"#}
{#                           class="btn btn-default pull-left">#}
{#                    <div id="recovery" class="">#}
{#                        <input id="recoverBtn" type="submit" formaction="/api/recover.php" value="Recover"#}
{#                               class="btn btn-default pull-right">#}
{#                        <div class="text-center hidden">#}
{#                            <label for="udfCheck">#}
{#                                <input id="udfCheck" type="checkbox" name="udf">#}
{#                                <span> use PHP</span>#}
{#                            </label>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
            </form>
        </div>
    </div>
    <script>

        function handleSelection() {
            var select = document.getElementById("select-select");
            var selectedValue = select.value;
            select_option(selectedValue);
        }

        function changeDataset() {
            var select = document.getElementById("form-dataset");
            console.log(select.value)
            document.getElementById("dataset").innerText = select.value;
        }

        {##}
        {##}

        function select_option(selectedValue) {
            // iterate the divs in #second-row and hide them if they are not average
            var divs = document.getElementById("content").children;
            var blocked = false;
            for (var i = 0; i < divs.length; i++) {
                if (divs[i].classList.contains(selectedValue)) {
                    divs[i].style.display = "block";
                    blocked = true;
                } else {
                    divs[i].style.display = "none";
                }
            }

            // handle the ";" at the end of the query
            var content = document.getElementById('content');
            var semicolon = document.getElementById('semicolon');
            if (!content.innerText.endsWith(";") && !semicolon.innerText.endsWith(";")) {
                semicolon.innerHTML = ";"
            }
            if (content.innerText.endsWith(";") && semicolon.innerText.endsWith(";")) {
                semicolon.innerHTML = ""
            }

        }
    </script>

{% endblock %}